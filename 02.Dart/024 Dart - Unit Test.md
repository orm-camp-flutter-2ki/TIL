---
title: 024 Dart - Unit Test
author: Kim Donghyeok
created_at: 2024-03-27
updated_at: 2024-03-27
tags:
  - 생존코딩
  - 오름캠프
  - dart
---

# Unit Test

클래스를 작성했다고 개발이 완성되었다고 할 수 있을까?

클래스 개발은 절반 작성 했더라도 실제로 완성까지 4배 정도의 시간이 걸릴 수 있다.

## 테스트를 통한 품질 향상

수동 테스트 : 인간이 하는 테스트 (print)

단위 테스트 : 1개의 함수를 테스트 (test)

통합 테스트 : 여러개 연관된 클래스나 함수를 함께 테스트 (UI test, Integration test)

## 테스트 방법론

### 블랙박스 테스트

- 소프트웨어의 내부 구조를 무시하고 기능을 테스트 하는 방법
- 시스템이 어떻게 동작하는지에 대한 내부 정보를 알 필요 없이 사용자 관점에서 테스트
- 테스트 케이스는 입력값과 에상 출력 값에 기반하여 설계
- 요구사항을 충족하는 지 확인하고, 시스템의 기능적 및 비기능적 요구사항을 테스트
- 주요 기법으로는 등가 분할, 경계 값 분석, 상태 전이 테스트 등

### 화이트 박스 테스트

- 내부 구조와 동작에 중점을 두고 테스트하는 방법
- 코드의 내부 로직, 제어 흐름, 데이터 흐름 등을 이해하고 검증 하는 데에 사용
- 테스트 케이스를 설계할 때 코드를 특정 부분을 직접 확인
- 주요 기법으로는 구문 검사, 경로 검사, 조건/분기 검사 등이 있다.

### Unit Test (단위 테스트)

새로운 기능을 추가하거나 기존 기능을 변경 했을 때, 앱이 여전히 동작한다는 것을 보장하기 위해 작성하는 테스트.

## 테스트의 장점

- 장애에 관한 신속한 피드백
- 개발 주기에서 **조기 장애 감지**
- 회귀에 신경 쓸 필요 없이 코드를 최적화 할 수 있도록 하는 **더 안전한 코드 리팩토링**
- 기술적 문제를 최소화 하는 **안정적인 개발 속도**

## 테스트 케이스

가능한 모든 가능성의 범위를 테스트하는 것이 좋은 테스트

- 동등 분할
- 경계값 분석
  - 경계 내부의 값, 경계 외부의 값을 나누어서 테스트를 진행

## 단위 테스트가 꼭 필요한경우

DB

- 스키마가 변경되는 경우
- 모델 클래스가 변경되는 경우

Network

- 예측한 데이터가 제대로 들어오는지

데이터 검증

- 예측한 데이터를 제대로 처리하고 있는지

# Test 순서

1. 테스트 환경 준비  
2. 여러가지 기법 중 given → when → then 기법을 사용한다. / expect 함수를 활용한 결과 검증
3. test() 함수를 여러개 작성 group 등도 가능
4. 테스트 실행
5. 테스트 성공 / 실패
6. 테스트 수정

> 테스트 중심으로 개발하는 방법론을 TDD (Test Driven Development) 라고 한다.

## Test Double

테스트를 진행하기 어려운 경우에 테스트가 가능하도록 만들어주는 객체

![[240327_test_double.png]](/02.Dart/_resources/240327_test_double.png)

> Mock, Stub, Spy, FakeObject → Test Double 의 경계는 모호하므로 용어에 집착하지 말자!

# Mock 객체 활용

때때로 단위테스트는 라이브 웹 서비스 또는 데이터베이스에서 데이터를 가져오는 클래스에 의존할 수 있다.

라이브 서비스, 데이터베이스에 문제가 생겼을 때 다음과 같은 문제가 발생 할 수 있음

- 테스트 실행 속도가 느려짐
- 예기치 못한 결과를 반환하면 통과 테스트가 실패하기 시작할 수 있음
- 가능한 모든 성공 및 실패 시나리오는 테스트 하는 것이 어려움

> 라이브 웹 서비스. 데이터베이스에 의존하는 대신 이러한 종속성을 Mocking 할 수 있음

# 테스트 용이성

다형성을 활용하면 테스트 할 때 원하는 객체를 활용 가능 → **intreface 활용**

![[240327_test_hierarchy.png]](/02.Dart/_resources/240327_test_hierarchy.png)

> *이런 형태 보다는*
> ![[240327_포함관계.png]](/02.Dart/_resources/240327_포함관계.png)

> *이런 형태가 낫다*
> ![[240327_상속관계.png]](/02.Dart/_resources/240327_상속관계.png)
