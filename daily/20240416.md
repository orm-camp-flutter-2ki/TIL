2# <span style="color:lime">202404 플러터 과정 8주차 월요일</span>   

## 1. 꼭 기억할 것! 🏅
### 디바운스와 쓰로틀링

### 의미
디바운스(Debounce)와 쓰로틀링(Throttle)은 모두 고성능 웹 애플리케이션을 구현할 때 자주 사용되는 기술입니다. 이들은 주로 이벤트 처리량을 제어하여 불필요한 리소스 낭비를 방지하는 데 목적이 있습니다. Flutter 앱에서도 마찬가지로 이러한 기술을 사용하여 더 나은 사용자 경험을 제공할 수 있습니다.

디바운스 (Debounce)
디바운스는 연속적으로 발생하는 이벤트들 중에서 마지막 이벤트만을 처리하는 방식입니다. 즉, 특정 시간 동안 이벤트가 재발생하지 않을 때만 이벤트 핸들러를 실행합니다. 이는 예를 들어 사용자가 검색어를 입력할 때, 모든 키 입력에 대해 검색을 수행하는 대신 사용자가 타이핑을 멈추고 일정 시간이 지난 후에 검색을 수행하도록 하는 데 유용합니다.

쓰로틀링 (Throttle)
쓰로틀링은 정해진 시간 동안에 한 번만 이벤트를 처리하는 기법입니다. 예를 들어, 사용자가 스크롤하는 동안 스크롤 이벤트를 매 초마다 한 번씩만 처리하여 성능을 개선할 수 있습니다. 이는 이벤트 처리 빈도를 제한함으로써 리소스 사용을 최적화합니다.

### 공통점
디바운스와 쓰로틀링 모두 이벤트 처리를 최적화하기 위해 사용되며, 불필요한 리소스 낭비를 줄이고 애플리케이션의 성능을 향상시키는 데 목적이 있습니다.

### 차이점
디바운스는 연속적인 이벤트 발생 중 마지막 이벤트만을 처리하는 반면, 쓰로틀링은 정해진 시간 간격으로 이벤트를 처리합니다.
디바운스는 주로 끝나는 지점을 기준으로 이벤트를 처리하는 데 사용되고, 쓰로틀링은 시작하는 지점을 기준으로 일정한 빈도로 이벤트를 처리하는 데 사용됩니다.
Flutter 앱에서의 사용 예
Flutter에서는 rxdart 패키지를 사용하여 쉽게 디바운스와 쓰로틀링을 구현할 수 있습니다.


```dart
import 'package:rxdart/rxdart.dart';

void main() {
  final searchQuery = BehaviorSubject<String>();

  // 디바운스 예제
  searchQuery.stream
    .debounceTime(Duration(milliseconds: 300))
    .listen((query) {
      // 사용자가 타이핑을 멈춘 후 300ms가 지난 후에 실행될 로직
      print("검색 실행: $query");
    });

  // 쓰로틀링 예제
  searchQuery.stream
    .throttleTime(Duration(seconds: 1))
    .listen((query) {
      // 매 1초마다 한 번씩 실행될 로직
      print("검색 실행: $query");
    });

  // 사용자 입력 모방
  searchQuery.add("a");
  searchQuery.add("ab");
  searchQuery.add("abc");
}
```


### 이벤트큐와 micro큐
Flutter에서 이벤트 큐(Event Queue)와 마이크로태스크 큐(Microtask Queue)는 Dart 언어의 비동기 프로그래밍 모델에서 중요한 역할을 합니다. 이러한 큐들은 비동기 이벤트들을 관리하며, Dart의 이벤트 루프(Event Loop)에 의해 처리됩니다.

### 이벤트 큐 (Event Queue)
이벤트 큐는 비동기 이벤트들, 예를 들어 사용자 인터랙션, 타이머, I/O 작업 완료와 같은 이벤트들이 순서대로 대기하는 곳입니다. 이벤트 큐에 있는 작업들은 현재 실행 중인 코드가 완료되고 마이크로태스크 큐가 비어있을 때, 이벤트 루프에 의해 하나씩 처리됩니다.

### 마이크로태스크 큐 (Microtask Queue)
마이크로태스크 큐는 '마이크로태스크(Microtasks)'를 위한 것으로, 주로 프로미스(Promises)의 완료 핸들러와 같은, 지연 없이 바로 실행되어야 하는 작업들을 처리합니다. 마이크로태스크 큐의 작업들은 현재 실행 중인 코드가 끝나는 즉시, 그리고 이벤트 큐에 있는 작업들보다 먼저 실행됩니다. 이는 마이크로태스크가 이벤트 큐의 작업보다 우선순위가 높다는 것을 의미합니다.

### 이벤트 루프 (Event Loop)와의 관계
Dart의 이벤트 루프는 싱글 스레드 기반으로 동작합니다. 이벤트 루프는 다음과 같은 순서로 작업을 처리합니다:

현재 실행 중인 코드를 완료합니다.
마이크로태스크 큐가 비어있지 않다면, 마이크로태스크 큐에서 작업을 하나 가져와 처리합니다. 마이크로태스크 큐가 비어있을 때까지 이 과정을 반복합니다.
마이크로태스크 큐가 비어있으면, 이벤트 큐에서 다음 이벤트를 하나 가져와 처리합니다.
이벤트 큐와 마이크로태스크 큐 모두 비어있으면, 새로운 이벤트가 들어올 때까지 대기합니다.
Flutter에서의 사용 예
Flutter 애플리케이션에서 비동기 작업을 수행할 때, 이러한 큐들과 이벤트 루프의 동작 방식을 이해하는 것이 중요합니다. 예를 들어, UI를 업데이트하는 작업은 이벤트 큐를 통해 스케줄링 될 수 있으며, Future와 async/await 문법을 사용하여 비동기 작업을 쉽게 다룰 수 있습니다.

```dart
Future<void> fetchData() async {
  // 네트워크 요청을 비동기적으로 실행
  final data = await Network.fetchData();
  // 데이터 처리
  print(data);
}

void main() {
  fetchData();
  // 마이크로태스크 예
  Future.microtask(() => print('마이크로태스크 큐에서 실행된 작업'));
  print('메인 코드 실행');
}
```

위 코드에서 fetchData 함수는 비동기 함수로, 네트워크 요청을 처리하고 결과를 출력합니다. Future.microtask는 마이크로태스크 큐에 작업을 추가하여, 현재 실행 중인 메인 코드가 완료된 직후에 실행됩니다.