# 202404 í”ŒëŸ¬í„° ê³¼ì • 9ì£¼ì°¨ í™”ìš”ì¼

## 1. ê¼­ ê¸°ì–µí•  ê²ƒ! ğŸ…
### Stream
- ì‹¤ì‹œê°„ìœ¼ë¡œ ìƒì„±ë˜ê³  ì „ì†¡ë˜ëŠ” ë°ì´í„°ì˜ íë¦„
- ë°ì´í„° ìˆ˜ì • -> UIë³€ê²½ì´ ìë™ìœ¼ë¡œ (provider)
	ex. Stream builder (google map í•  ë•Œ)
	ex. firebase (remote db)

### Stream Builder
- ì´ê±´ ì–´ë ¤ìš´ ì½”ë“œë¼ ì•ˆ ë‹¤ë£° ê²ƒ
- ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš°ì˜ ì²˜ë¦¬ë„ í•œ êµ°ë°ì„œ ë‹¤ ì²˜ë¦¬í•¨
- ì›í•˜ëŠ” ë¶€ë¶„ë§Œ UI ê°±ì‹ ì´ ê°€ëŠ¥í•¨
- ìŠ¤íŠ¸ë¦¼ ë¹Œë” (Future bulderì™€ ì‚¬ìš©ë°©ë²• ìœ ì‚¬í•¨)
- initial builderê°€ ìˆì–´ì„œ ì´ˆê¸°ê°’ ì„¤ì • ë§ê³ ëŠ” ì‚¬ìš©ë°©ë²• ë˜‘ê°™ìŒ
- ìˆ˜í‰ê³„ ìƒ˜í”Œ https://github.com/junsuk5/flutter-first-guide/blob/master/tilt_sensor/lib/main.dart

### êµ¬ë… / í•´ì§€
- Stream ë°ì´í„°ë¥¼ UI ë¡œ ë³€í™˜í•  í•„ìš”ê°€ ì—†ëŠ” ê²½ìš°ì— í™œìš©
- listen() ìœ¼ë¡œ êµ¬ë…

  ![image](https://github.com/itbebop/TIL/assets/86880025/cdb16090-2863-486b-b864-22573d15d3a2)

- cancel() ë¡œ í•´ì§€

  ![image](https://github.com/itbebop/TIL/assets/86880025/1b061388-03f0-4868-bc71-19875f6996f5)

- listen() ìœ¼ë¡œ ì‹œì‘í•œ êµ¬ë…ì„ í•´ì§€í•˜ë ¤ë©´ StreamSubscription ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í†µí•´ì•¼ í•œë‹¤

![image](https://github.com/itbebop/TIL/assets/86880025/fc460e82-a5b5-4c6b-ba23-675a978aa16b)

- êµ¬ë…ì˜ í•´ì§€

- StreamController ì‘ì„±

í•˜ë‚˜ì˜ ë¦¬ìŠ¤í„°ë¥¼ í—ˆìš©í•˜ëŠ” ìŠ¤íŠ¸ë¦¼
- êµ¬ë…ì„ í•œ êµ°ë°ì„œ ë°–ì— ëª»í•¨
- Cold Streamì´ë¼ê³  í•¨ (ë‹¤ë¥¸ ì–¸ì–´ì—ì„œë„ ë™ì¼í•¨)
- ë‚´ê°€ ìš”ì²­í•˜ë©´ ë°ì´í„°ë¥¼ ì¤Œ
- ì£¼ë¡œ ì´ ìŠ¤íŠ¸ë¦¼ ìœ í˜•ì„ ì‚¬ìš©í•¨

```dart
final _streamController = StreamContorller<int>();

_streamContorller.add(10);
// ì‚¬ì‹¤ì€ addë¼ê¸°ë³´ë‹¤ ì•ˆì— ìˆê±°ë‚˜ ì•„ì˜ˆ ê°’ì´ ì—†ê±°ë‚˜ 
```

ì—¬ëŸ¬ ë¦¬ìŠ¤ë„ˆë¥¼ í—ˆìš©í•˜ëŠ” ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìŠ¤íŠ¸ë¦¼(Hot Stream)
- ìš”ì²­ê³¼ ìƒê´€ì—†ì´ ë°ì´í„°ë¥¼ ì¤Œ
- ì´ì „ í™”ë©´ì˜(ì§€ë‚˜ê°„) ì—ëŸ¬ëŠ” í‘œì‹œë¥¼ ì•ˆí•´ë„ ë˜ëŠ” ê²½ìš°
```dart
final _streamController = StreamController<int>.braodcase();
```

![image](https://github.com/itbebop/TIL/assets/86880025/4681d6b5-36d6-480f-ba32-e79f2820ee3c)

### Stream sample ë§Œë“¤ê¸°

[http://worldtimeapi.org/api/timezone/Asia/Seoul](http://worldtimeapi.org/api/timezone/Asia/Seoul "http://worldtimeapi.org/api/timezone/Asia/Seoul")
- ì´ apië¥¼ ì´ìš©í•˜ì—¬ streamì„ ë§Œë“¤ì–´ ë³¼  ê²ƒ
- global appì„ ë§Œë“¤ ë•Œì˜ ì‹œê°„ì€ utc ê¸°ì¤€ìœ¼ë¡œ í•´ì•¼í•¨


- model

![image](https://github.com/itbebop/TIL/assets/86880025/394d6f4b-afc4-4f98-b739-804d80afdd50)

![image](https://github.com/itbebop/TIL/assets/86880025/6bf51f1d-d2d2-47ed-bbfd-5f953dbe957e)

- ë³€ìˆ˜ ìƒì„±í•˜ìë§ˆì ê°’ ë„£ìŒ
- async ëª»ë„£ì–´ì„œ thenì„ ì¨ì„œ ê°’ì„ ë„£ìŒ

![image](https://github.com/itbebop/TIL/assets/86880025/1e847300-97e8-4812-b82f-3ebcc8060746)

- 5ì´ˆì— í•œë²ˆì”© ë°˜ë³µ

![image](https://github.com/itbebop/TIL/assets/86880025/f18906bb-6c4a-4527-a20a-683e857b3bcd)

- getterë¡œ stream ë‚´ë³´ë‚´ê³ 

![image](https://github.com/itbebop/TIL/assets/86880025/fd0f0e2b-1f69-40b0-8923-e31d0b2c121f)

- streamì— ë“¤ì–´ê°€ìˆëŠ” ë°ì´í„°ë¥¼ ë‚´ë³´ë‚¼ ë•ŒëŠ” controllerì— .streamê°ì²´ë¥¼ í†µí•´ì„œ ë‚´ë³´ëƒ„

### test

![image](https://github.com/itbebop/TIL/assets/86880025/d3c2963e-e97a-4036-8abe-fb63231a855a)

- test package

- repositoryëŠ” ì•„ì§ ì—†ì–´ì„œ ê°€ì§œ ê°ì²´ ë§Œë“¬

![image](https://github.com/itbebop/TIL/assets/86880025/ebb4d546-60a6-4b63-8be2-9c973805f78e)

- _times ++ í•˜ë©´ ë‹¤ìŒ ê°ì²´ ì „ë‹¬í•´ì¤Œ

![image](https://github.com/itbebop/TIL/assets/86880025/5c7fedcc-2bcd-4126-834f-9ff9a65be257)


### usecase

![image](https://github.com/itbebop/TIL/assets/86880025/df9ab9bf-1947-4fe1-ac18-9d7b6fd1f232)


- execute()ì—ì„œ ìŠ¤íŠ¸ë¦¼ì„ ë‚´ë³´ë‚´ëŠ” ê²ƒìœ¼ë¡œ ìˆ˜ì •

![alt text](image-203.png)

- Timerperiodicì‹¤í–‰í•˜ê³ , ë¦¬í„´í•´ì„œ ê·¸ê±¸ ê°€ì ¸ë‹¤ê°€ ì“°ë©´ ë¨

### ë‹¤ì‹œ í…ŒìŠ¤íŠ¸

![image](https://github.com/itbebop/TIL/assets/86880025/fdf3ff11-0229-419d-a6e9-83a9a4ad882a)

### ë””ë²„ê¹…

![image](https://github.com/itbebop/TIL/assets/86880025/e7b1099c-07db-4d70-9705-406a3cbe6cc0)

- í•¨ìˆ˜ë¥¼ ì¶”ê°€í•¨

![image](https://github.com/itbebop/TIL/assets/86880025/11010923-70fb-4459-b68f-c5735371eabd)

ã… ì •ë¦¬
- controllerë§Œë“¤ê³ 
- .add í•œ ê²ƒ
- stream return í•˜ëŠ” ê²ƒ
- streamì„ getterë¡œ ë‚´ë³´ë‚¸ë‹¤.

### main viewmodel

ã„´timeì€ ê³„ì† ë°”ë€ŒëŠ” ë°ì´í„°
ã„´providerë¥¼ ì“°ëŠ” ê±´ Futurebuilderë¥¼ ì•ˆì¨ë„ ë˜ì„œ

- usecaseë¥¼ ë°›ìŒ
- ìƒì„±ìì—ì„œ ë°”ë¡œ startë¥¼ í•´ë²„ë¦¼

![image](https://github.com/itbebop/TIL/assets/86880025/5154bbce-a155-42d0-bcfc-387b8460071e)

![image](https://github.com/itbebop/TIL/assets/86880025/eb20de24-99d7-428d-9c5f-27f898720719)

### view

![image](https://github.com/itbebop/TIL/assets/86880025/fb0496ef-da94-48dc-9665-3dd1bf26a37d)


### DI

![image](https://github.com/itbebop/TIL/assets/86880025/29b10b9b-1810-46aa-8ba8-296cd6e8850f)


- GetInì˜ ì¸ìŠ¤í„´ìŠ¤ ê°€ì ¸ì™€ì„œ di Setup
- repositoryImplì„ ìŠ¹ê²© ì‹œí‚´

![image](https://github.com/itbebop/TIL/assets/86880025/e2025305-f4eb-4d1b-90b0-fd5f7cc3945e)

![image](https://github.com/itbebop/TIL/assets/86880025/2a383c31-3e46-42fe-bac3-433f71aa2e1c)

![image](https://github.com/itbebop/TIL/assets/86880025/730835f2-f234-4bfb-b40f-254433846cbd)

### main

![image](https://github.com/itbebop/TIL/assets/86880025/904b88c3-5451-41fb-905c-9afe56e99772)

### router

![image](https://github.com/itbebop/TIL/assets/86880025/b6ed5fe1-9ed1-41c4-a81d-ce2105808372)

### main

![image](https://github.com/itbebop/TIL/assets/86880025/f0ff2425-6064-42e3-9512-673cdb881a54)

### Data ìœ„ì¹˜ ì˜®ê¹€

![image](https://github.com/itbebop/TIL/assets/86880025/17da6916-10f3-4321-89f7-e71fdb0f9683)

### Testë„ ìˆ˜ì •

![image](https://github.com/itbebop/TIL/assets/86880025/9c29361d-bb15-4a24-b3b9-c61554d26026)


![image](https://github.com/itbebop/TIL/assets/86880025/242f96ab-eed3-4e8f-a922-bed3310120fc)

### Data
- ì§„ì§œ ë°ì´í„°ë¥¼ ë§Œë“¤ ê²ƒ
- time_repository_impl

### retrofit ì“¸ ê²ƒ
- depency ì¶”ê°€
	3ê°œ ë„£ì–´ì•¼í•¨(ìš´ì˜) + devì—ë„ 3ê°œ?
	
![image](https://github.com/itbebop/TIL/assets/86880025/4b2b7c23-1663-4f06-bf3d-475d43a63253)


### dioê°€ í•„ìš”í•¨
- world_time_data_sourcee
- data sourceë¥¼ abstractë¡œ ë§Œë“¬

![image](https://github.com/itbebop/TIL/assets/86880025/2e3d704c-b8bc-43f8-bf44-f6c673736c52)

- ì´ë ‡ê²Œ í•˜ê³  buildí•¨

- json, fromjson ë“±ë„ ì•Œì•„ì„œ ë§Œë“¤ì–´ì¤Œ
- DateTimeì´ fromjsnì´ ì—†ì–´ì„œ í„°ì§ˆ ê²ƒ

- abstract ì§€ë§Œ ì‹¤ì œ ë°ì´í„°ëŠ” ì´ë ‡ê²Œ ë§Œë“¤ì–´ì ¸ìˆìŒ

![image](https://github.com/itbebop/TIL/assets/86880025/a9d0d26c-31a0-48d0-8986-5bbbc07fbac3)

- ì‹¤ì œ repositoryë¥¼ ë§Œë“¬

![image](https://github.com/itbebop/TIL/assets/86880025/522be102-354b-4246-b1a4-b6a2a3ddf05d)

- ìƒì„±ìë¡œ ë°›ê³  ì¼ë°˜ constructor

- ì´ë¦„ ë°”ê¿ˆ

![image](https://github.com/itbebop/TIL/assets/86880025/1d54fc3c-8a54-4603-96e5-81ee69c8762c)

ì¡°ë¦½ì„ ë°”ê¿ˆ

imple -> get()ìœ¼ë¡œ 

![image](https://github.com/itbebop/TIL/assets/86880025/7e63568a-8a19-47f9-b880-c1118a64fbed)

![image](https://github.com/itbebop/TIL/assets/86880025/fceec16a-862a-49ca-8a84-d302008d27af)


![image](https://github.com/itbebop/TIL/assets/86880025/554e2b88-98da-49c9-a70f-9ff8773f010b)


![image](https://github.com/itbebop/TIL/assets/86880025/a1b487d3-6da0-44d6-868c-e0c4d967064d)

![image](https://github.com/itbebop/TIL/assets/86880025/28fae8a1-bb18-4988-83b9-5406b9f87ff4)

### repo impl

![image](https://github.com/itbebop/TIL/assets/86880025/50a72242-8b84-4ccc-91b5-ada4e5ccf038)

![image](https://github.com/itbebop/TIL/assets/86880025/7db128b2-b5b2-4d63-815b-32c47d3161d5)

- area ì£¼ì˜

![image](https://github.com/itbebop/TIL/assets/86880025/69e8607c-0565-4beb-bccc-0abf9588ecf6)

![image](https://github.com/itbebop/TIL/assets/86880025/4ca98047-f143-456d-b805-84bfadc8e031)

![image](https://github.com/itbebop/TIL/assets/86880025/7c0d7c7b-018b-488d-aa90-00d3df24487c)

![image](https://github.com/itbebop/TIL/assets/86880025/d768b9a2-8a95-44ee-88f4-f2c3e0148843)

## ì´ì œë¶€í„° ì¤‘ìš”í•¨

![image](https://github.com/itbebop/TIL/assets/86880025/1267fff4-b80d-42a6-9037-fd1b22da8fe7)

ì—ëŸ¬ê°€ ë‚¬ì„ ë•Œ ì—ëŸ¬ë¥¼ í˜ì´ì§€ë¡œ ë°”ê¾¸ëŠ” ê²ƒ
StreamBuilderëŠ” 1íšŒì„± ì²˜ë¦¬ëŠ” ëª»í•¨

íŒ¨í„´í™”
í™”ë©´ì—ì„œ ë°œìƒí•˜ëŠ” UI Eventë¥¼ Sealed í´ë˜ìŠ¤ë¡œ ì •ì˜

Enumë³´ë‹¤ í™•ì¥ëœ ê°œë…

Streamcontollerê°€ ê·¸ ì´ë²¤íŠ¸ë¥¼ ë°›ì„ ìˆ˜ ìˆê²Œ

ê·¸ë¦¬ê³  errorë¥¼ ë„£ì–´ì£¼ê³ 
initStateì—ì„œ êµ¬ë…ì„ í•´ì„œ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•¨

initStateì— ì½”ë“œê°€ ëª°ë¦¬ëŠ” ì¥ì ì´ ìˆëŠ”ë° ê·¸ì— ë¹„í•´ ì¥ì ì´ ë§ìŒ

## image appìœ¼ë¡œ ì—ëŸ¬ì²˜ë¦¬ 

![image](https://github.com/itbebop/TIL/assets/86880025/104b3f97-d4de-473c-ada8-3885e86f8bf7)

### search_list_event ë§Œë“¬
í™”ë©´ë³„ë¡œ eventë§Œë“œëŠ” ê²ƒ
sealed í´ë˜ìŠ¤ë¡œ ë§Œë“¤ ê²ƒ

ì´ ì´ë²¤íŠ¸ë¥¼ viewmodelì—ì„œ ê°€ì§€ê³  ìˆìŒ

### viewmodel

![image](https://github.com/itbebop/TIL/assets/86880025/473cc7a1-8221-43d9-9414-dd7ae3b8ddde)

executeê°€ ì—ëŸ¬ë‚˜ëŠ” íƒ€ì´ë°ì¼ ë“¯

ì—ëŸ¬ë¥¼ ìœ„í•´ì„œ coreì— resultë¥¼ ë§Œë“¬
sealedë¡œ
buildclass

### usecase
ì—ëŸ¬ ë‚ ë§Œí•œ ë¶€ë¶„ì„ resultë¡œ ê°ì‹¸ê³ 

try catch
ì—ëŸ¬ë¥¼ ë‚´ë³´ëƒ„

![image](https://github.com/itbebop/TIL/assets/86880025/36984492-3410-4f67-b0d8-5b876ffc5046)

### viewmodel
onserachì—ì„œ resultë¥¼ ê°€ì ¸ì™€ì„œ resultê°€ ì„±ê³µì¸ì§€ ì‹¤íŒ¨ì¸ì§€

ì‹¤íŒ¨í•˜ë©´ í™”ë©´ì— ì•Œë ¤ì¤˜ì•¼í•¨
ì‹¤íŒ¨í–ˆìœ¼ë©´ eventì— ë“¤ì–´ê°€ìˆìŒ

notifyëŠ” ì•ˆí•´ë„ ë¨
controllerì— addë§Œ í•´ì£¼ë©´ ë¨

ì„±ê³µí–ˆì„ ë•Œë„, ì‹¤íŒ¨í–ˆì„ ë•Œë„ addí•´ì„œ ë„£ì–´ì£¼ë©´ ë©”ì‹œì§€ë¥¼ ì£¼ëŠ” ê²ƒ

í™”ë©´ ë‹¨ì—ì„œ ì²˜ë¦¬
initStateì—ì„œ ì²˜ë¦¬ -> ê·¸ ì´ë²¤íŠ¸ë¥¼ êµ¬ë…í•¨

### View

í„°ì§€ë©´ Exceptionë‚´ê³  ì„±ê³µí•˜ë©´ ì‹¤í–‰

![image](https://github.com/itbebop/TIL/assets/86880025/9b8fd91a-b8a5-4daf-bcf2-a50e01d2147d)

initStateì—ì„œ ì¼íšŒì„± ì ‘ê·¼
buildì—ì„œë§Œ watch ì¨ì•¼í•¨

ì´ë²¤íŠ¸ ìˆëŠ” ë°ì„œëŠ” read, disposeì—ì„œëŠ” read


ì¤‘ê°„ì— ì˜ìƒ ë³¼ ê²ƒ


streamì—ì„œ ì œê³µí•˜ëŠ” map ì“¸ í•„ìš”ìˆìŒ


ë¦¬ìŠ¨ ë‘ ë²ˆ í•˜ë©´ í„°ì§
ë¸Œë¡œë“œ ìºìŠ¤íŠ¸ë¡œ í•˜ëŠ” ê²ƒ ì•Œê³ ë§Œ ìˆìœ¼ë©´ ë¨

## Streamì„ initStateì—ì„œ ì“°ëŠ” ëŒ€ì‹ 
ìŠ¤íŠ¸ë¦¼ì„ ì“°ì§€ì•Šê³ , ë·°ëª¨ë¸ì— ValueNotifierë¥¼ ì“°ê³    í™”ë©´ì—ì„œ addListenerë¥¼ í†µí•´ì„œ ì²˜ë¦¬í•˜ë„ë¡ í•˜ë©´  ê²°ê³¼ëŠ” ê°™ì§€ ì•Šë‚˜ìš”?
SerchListEvent ë‚´ë¶€ì—  ì•„ë¬´ê²ƒë„ ì•„ë‹Œ ìƒíƒœê°’ì„ ê°–ë„ë¡

Timeì„ ë°›ìŒ
ì²˜ìŒì—ëŠ” Timeì´ ì—†ìœ¼ë¯€ë¡œ nullable
getterë¡œ timeì„ ë°›ìŒ
Timeì´ ì—†ìœ¼ë©´


## 2. í•œì¤„ ì •ë¦¬ ğŸ§¹
1. Stream ê³µì‹ë¬¸ì„œ ì˜ìƒ ë³¼ ê²ƒ https://youtu.be/nQBpOIHE4eE


## 3. ì°¸ê³ 
1. í•¨ìˆ˜ë“¤ì„ ëª¨ì•„ë‘” ì‚¬ì´íŠ¸ https://reactivex.io/
2. RXdart 
	- bloc ì“¸ ë• ì¨ì•¼
	- ì•„ë˜ í•¨ìˆ˜ë“¤ ì§€ì›í•¨
	  - ex. Map
	  - ex. Filter (dartì—ì„œëŠ” where)
    - ex. Debounce (dartì—ì„œëŠ” ì œê³µ x)
	  - ex. take

## hero in router
```dart
import 'package:flutter/material.dart';
import 'package:flutter_image_search_with_provider/data/model/photo.dart';
import 'package:go_router/go_router.dart';

class ImageCard extends StatelessWidget {
  final Photo photo;

  const ImageCard({super.key, required this.photo});

  @override
  Widget build(BuildContext context) {
    return Hero(
      tag: photo.id,
      child: GestureDetector(
        onTap: () {
          context.push('/details', extra: photo);
        },
        child: ClipRRect(
          borderRadius: BorderRadius.circular(8),
          child: Image.network(photo.url, fit: BoxFit.cover),
        ),
      ),
    );
  }
}

import 'package:flutter/material.dart';
import 'package:flutter_image_search_with_provider/data/model/photo.dart';
import 'package:google_fonts/google_fonts.dart';

class PhotoDetailScreen extends StatelessWidget {
  final Photo photo;

  const PhotoDetailScreen({super.key, required this.photo});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('ì´ë¯¸ì§€ ìƒì„¸'),
      ),
      body: Column(
        mainAxisAlignment: MainAxisAlignment.start,
        crossAxisAlignment: CrossAxisAlignment.center,
        children: [
          Padding(
            padding: const EdgeInsets.all(8.0),
            child: Hero(
                tag: photo.id,
                child: ClipRRect(
                    borderRadius: BorderRadius.circular(20),
                    child: Image.network(
                      photo.url,
                      fit: BoxFit.cover,
                    ))),
          ),
          Expanded(
            child: Column(
              mainAxisAlignment: MainAxisAlignment.center,
              children: photo.tags
                  .split(', ')
                  .toList()
                  .map((tag) => Text(
                        tag,
                        style: GoogleFonts.merienda(
                            textStyle: const TextStyle(fontSize: 24)),
                      ))
                  .toList(),
            ),
          )
        ],
      ),
    );
  }
}