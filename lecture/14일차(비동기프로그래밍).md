# 14일차

ListEquality().equals( list1 ,list2 ) 리스트 동등성 비교시 

DeepCollectionEquality().equals( list1 ,list2 ) 리스트 중복시 깊게 동등성 비교(맵 셋 도 비교가능) 

sort 원본변경

sorted 원본변경하지 않고 정렬된 객체 반환

함수형프로그래밍의 장점 ⇒ 변수사용을 줄일 수 있어서 휴먼에러를 줄일 수 있음

## 비동기 프로그래밍

**동기(sync) 프로그래밍**

코드가 순서대로 실행된다.

작업이 완료될 때까지 프로그램이 중단될 수 없다.

모든 작업은 이전 작업의 실행이 완료될 때까지 기다려야 한다.

동기와 비동기 


앱 개발시 비동기프로그래밍 필요하다. 날씨화면 을 불러드리는 과정에서 로딩중이라는 화면

을 띄우는 방식이 필요한 경우가 있다 동기방식으로 하려면 날씨 화면이 불러드리는 과정을 기다린 후 로딩중이라는 화면이 뜬다.(이러면 안된다) 이렇게 별도의 흐름을 가지는 가져야 하는 경우 비동기 프로그래밍이 필요하다.

**비동기(async) 프로그래밍**

임의의 순서로 또는 동시에 작업이 실행될 수 있다.

비동기를 처리하는 방법에는 콜백, Future, async - await 방식이 있다.

콜백 함수

비동기는 현재 코드의 **실행 결과를 받지 않고** 이후 코드를 수행하는 기법이다.

컴퓨팅 자원을 효율적으로 사용하는 기법이지만 정확한 **순서**를 지켜 수행해야 하는지를 고려해야 한다.

비동기 코드를 순서대로 실행하는 가장 일반적인 방안으로 **콜백(Callback)**이 있다.

콜백은 **실행 가능한 함수를 인자로 전달**하여, **특정 상황**이 발생할 때 **호출**되게 하는 방식이다.

현실 세계에서 콜백의 예시 :

음식을 주문하고 진동벨을 가지고 기다리면 음식이 준비되면 손님을 호출(Callback)하는 상황

Future 사용

미래에 완료되는 객체

Javascript 의 Promise 에 대응

Future 는 ‘미래'에 받아올 값을 의미

Future 작성

Dart 및 Flutter 의 많은 API 는 Future 타입을 리턴한다.

다음 코드는 비동기 코드를 시뮬레이트하기 위해 5 초 후에 실행되는 Future 함수를 정의한 것이다.

컨트롤+p 파라미터위치에서 단축키누르면 정보확인

Future 함수는 함수 본문 앞에 **async** 키워드를 지정해 줘야 한다(문법)

**대기하고 싶은 비동기 함수**를 실행할 때 **await** 키워드를 사용해주면 코드를 작성한 **순서대로 실행**된다. 

**await** 는 async 붙은 함수(또는 메서드)에서만 쓸수 있음

Future 함수는 결과를 then() 함수를 통해서 받을 수 있다.

then() 함수로 전달되는 콜백 함수에 다음에 실행할 코드를 작성하면 된다.

다음 코드가 Future라면 계속해서 then() 을 이어서 결과를 전달받을 수 있다.

불필요한 인자는 _ 를 쓰는 것이 관례이다.

Future 는 성공(then)일 수도 있고 오류(catchError)일 수도 있다

whenComplete() 는 성공, 실패 관계없이 실행된다.

⇒성공일 때 then 오류일때 catchError 내용 실행

**then() 사용의 문제점**

- 확실히 콜백 보다는 편하지만 동기식 코드 보다는 결과 예측이 어렵다.
- 단계가 많아지면 then() 을 연결하는 체이닝 방식을 사용하는 것이 만만치 않다.
- 로직이 복잡해 지면 적절한 예외처리하기에 용이하지 않다.
- 궁금하다면 최대한 복잡한 코드를 찾아보자.

async - await 문법

async - await 는 비동기 코드를 작성할 때 더 깔끔한 코드를 제공한다.

await 키워드는 해당 Future 가 끝날 때까지 함수 실행을 기다린다.

![Untitled 3](https://github.com/happysong3914/TIL/assets/130008915/f881141e-b54a-4bda-a988-5dcb70c24bed)


async - await 와 try - catch 조합이 훨씬 알기 쉽다

await 빼먹은 실수 많이 나기가 쉽다 조심하여라

병렬(Parallelism) 처리

병렬 처리는 동시에 여러가지 일을 진행하는 것이다. (따로가는것)

Future 함수는 await 없이 사용하면 동시에 여러개를 실행할 수 있다.

VS 동시성 (Concurrency) = 동시에 실행되는 것 같아 보임(시간을 나누어서 진행)

다트는 쓰레드 개념 없음 

병렬처리 await 없이 해야 하는 경우 도 있음

 한화면에 여러 정보 동시에 보여줘야하는 경우

**정리**

1. 비동기를 다루는 방법을 모두 말 할 수 있어야 한다.
2. await 키워드 뒤에는 반드시 Future 타입이 와야 한다.
3. await 키워드는 async 키워드가 있는 함수에서만 사용할 수 있다.
4. 에러처리나 가독성, 처리상황에 따라 적절한 코드를 잘 선택할 수 있어야 한다.
